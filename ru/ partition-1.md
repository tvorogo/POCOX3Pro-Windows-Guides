
# Запуск Windows на Xiaomi Poco X3 Pro

## Установка

### Требования
- ```Разблокированный загрузчик```

-  ```Мозг```

- ```ПК/Ноутбук c Windows 10(или выше)```

- [```SDK platform-tools```](https://developer.android.com/studio/releases/platform-tools)

- [```Модифицированный образ recovery```](https://github.com/WaLoVayu/POCOX3Pro-Common-Files/releases/download/twrp/twrp-3.7.1_vap.img)

### Заметки:
> [!NOTE]
> Вы можете использовать любую прошивку Android для дуалбута - MIUI, HyperOS или любую другую

> [!WARNING]
> Все ваши данные будут удалены! Создайте резервную копию, если необходимо.
> 
>  Если вы считаете, что допустили ошибку, НЕ ПЕРЕЗАГРУЖАЙТЕ ПЛАНШЕТ: обратитесь за помощью в [чат Telegram](https://t.me/nabuwoaru)

### Откройте CMD от имени администратора
- Распакуйте загруженные [```SDK platform-tools```](https://developer.android.com/studio/releases/platform-tools), затем откройте командную строку от имени администратора и запустите следующую команду, заменив `путь\к\platform-tools` на фактический путь к папке platform tools
```cmd
cd путь\к\platform-tools
```
- Используйте это окно на протяжении всего руководства. Не закрывайте его.

#### Перезагрузка в fastboot 
- Перезагрузите NABU в **fastboot**, удерживая нажатой кнопку **`уменьшения громкости`** во время перезагрузки с подключенным USB-кабелем.
- Или, если у вас включена отладка по USB, выполните команду ниже, находясь в Android с подключенным USB-кабелем.
```cmd
adb reboot bootloader
```



### Загрузка в модифицированный recovery
> Находясь в режиме fastboot, замените `путь\к\recovery.img` фактическим путем к образу recovery
```cmd
fastboot boot путь\к\recovery.img
```

### Создайте резервную копию вашего существующего загрузочного образа
```cmd
adb shell "dd if=/dev/block/platform/soc/1d84000.ufshc/by-name/boot$(getprop ro.boot.slot_suffix) of=/tmp/normal_boot.img" && adb pull /tmp/normal_boot.img
```

### Прошивка последнего firmware

- Cкачайте **fw_vayu_miui.zip** и положите в удобную для вас папку на теефоне.
- Выберите пункт **Install** в TWRP, найдите фай который скаччали ранее и установите его.
- это не требует перезагрузки, оставайтесь в  TWRP для следующих шагов.

### Разметка хранилища устройства
 
### Запустите скрипт разметки

> Замените **$** на объём памяти, который вы хотите выделить для Windows (не добавляйте ГБ, просто напишите число)
> 
> Скрипт может попросить вас запустить его еще раз. В таком случае, выполните эту же команду заново.
```cmd
adb shell 
```

```cmd
partition $
```

- Исправление GPT `или Windows может убить ваше устройство`

```cmd
fixgpt
```

### [Следующий шаг: получение root-доступа на вашем устройстве](rootguide-2.md)

